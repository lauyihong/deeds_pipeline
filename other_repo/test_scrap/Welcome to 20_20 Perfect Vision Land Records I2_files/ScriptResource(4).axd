var initialText="ACS.Presentation.Web.DataGridEx:",alertMessageText=initialText,hidePopupHandler;Type.registerNamespace("ACS.Presentation.Web.DataGridEx");ACS.Presentation.Web.DataGridEx.DataGridBehavior=function(b){var a=this;ACS.Presentation.Web.DataGridEx.DataGridBehavior.initializeBase(a,[b]);a._dataGridId=null;a._dataGridHeaderId=null;a._dataGridFooterId=null};ACS.Presentation.Web.DataGridEx.DataGridBehavior.prototype={initialize:function(){var q="TABLE",C="mouseout",B="mouseover",p="fixed",A="break-word",o="hidden",g=null,a=this;ACS.Presentation.Web.DataGridEx.DataGridBehavior.callBaseMethod(a,"initialize");var K=a;if(!K||a._dataGridId==g||a._dataGridId==undefined)return;var m=Sys.UI.DomElement.getElementById(a._dataGridId);if(!m)return;var b=m.parentNode;if(b==g||b==undefined)return;var j=a._footerHeight;if(j==g||j==undefined)j=30;var F=a._rowCount,E=a._pageSize,M=a._pageIndex,H=m.getElementsByTagName("TBODY"),d=H[0];if(d==undefined){a._repositionHandler=Function.createDelegate(a,a._reposition);$addHandler(window,"resize",a._repositionHandler);a.raiseRepositioning(Sys.EventArgs.Empty);return}var l=d.getElementsByTagName("TR"),L=l[0].cells.length,J=d.rows.length;bodyTableBody=d;var z=l[0];if(a._fixScroll){b.style.overflow=o;if(a._footerId!=g&&a._footerId!=undefined)var w=Sys.UI.DomElement.getElementById(a._footerId).parentNode,I=w.parentNode.removeChild(w);else if(F>E)var I=d.removeChild(l[J-1]);var z=d.removeChild(l[0]);bodyTableBody=m.removeChild(d);bodyTableBody.style.wordWrap=A}a._addCheckBoxes&&a._addCheckBoxesToTable(bodyTableBody);var v=navigator.userAgent,s=v.indexOf("MSIE "),D=Sys.UI.DomElement.getElementById(a._popupPanelId);D.style.position=p;D.style["z-index"]="10000";a._fixSrolPosHandler=Function.createDelegate(a,a._fixSrolPosition);a._showPopupHandler=Function.createDelegate(a,a._showPopup);hidePopupHandler=Function.createDelegate(a,a._hidePopup);if(s>-1&&parseFloat(v.substring(s+5,v.indexOf(";",s)))<8)for(var e=0;e<bodyTableBody.childNodes.length;e++)for(var n=bodyTableBody.childNodes[e],f=1;f<n.childNodes.length;f++){var c=n.childNodes[f].getElementsByTagName("A")[0];if(c){$addHandler(c,"click",a._fixSrolPosHandler);$addHandler(c,B,a._showPopupHandler);$addHandler(c,C,hidePopupHandler)}}else for(var e=0;e<bodyTableBody.rows.length;e++)for(var n=bodyTableBody.rows[e].cells,f=0;f<n.length;f++){var c=n[f].getElementsByTagName("A")[0];if(c){$addHandler(c,"click",a._fixSrolPosHandler);$addHandler(c,B,a._showPopupHandler);$addHandler(c,C,hidePopupHandler)}}var x=z,G=z.childNodes[0];if(a._addCheckBoxes){th=document.createElement("TH");th.style.width="20px";x.insertBefore(th,G)}if(a._fixScroll){if(F>E||a._footerId!=g&&a._footerId!=undefined){var r=I.getElementsByTagName(q)[0],i=document.createElement("DIV");if(!r.style.height)i.style.height=j+"px";else i.style.height=parseInt(r.style.height)+20+"px";i.style.overflow=o;i.appendChild(r);b.insertBefore(i,b.firstChild)}var k=document.createElement(q);k.style.tableLayout=p;k.style.width="100%";k.appendChild(bodyTableBody);var u=document.createElement("DIV");u.style.overflow="scroll";u.appendChild(k);b.insertBefore(u,b.firstChild);var y=document.createElement("THEAD");y.appendChild(x);var h=document.createElement(q);h.style.tableLayout=p;h.style.width="100%";h.style.wordWrap=A;h.appendChild(y);var t=document.createElement("DIV");t.style.overflow=o;t.appendChild(h);b.insertBefore(t,b.firstChild);a._repositionHandler=Function.createDelegate(a,a._reposition);$addHandler(window,"resize",a._repositionHandler);a._reposition()}},_addCheckBoxesToTable:function(d){var f="click",j="checkbox",a=this,n=Sys.UI.DomElement.getElementById(a._checkInfoId);if(a._allChkBoxIDs==undefined)a._allChkBoxIDs="";var i=navigator.userAgent,h=i.indexOf("MSIE ");if(h>-1&&parseFloat(i.substring(h+5,i.indexOf(";",h)))<8){var e=0;if(d.childNodes[0].childNodes[0].nodeName=="TH")e++;for(b=0;b<d.childNodes.length-e;b++){var g=d.childNodes[b+e];td=document.createElement("td");if(!a._isFooter||b<d.childNodes.length-e-1){var c=document.createElement("input");c.type=j;c.checked=c.defaultChecked=false;c.id="chk"+a._dataGridId+String(b+a._pageIndex*a._pageSize);td.appendChild(c);a._clickCheckBoxHandler=Function.createDelegate(a,a._clickCheckBox);$addHandler(c,f,a._clickCheckBoxHandler);a._allChkBoxIDs+=String(b+a._pageIndex*a._pageSize)+","}g.insertBefore(td,g.childNodes[0])}}else{var e=0;if(d.childNodes[0].cells[0].nodeName=="TH")e++;for(var b=0;b<d.rows.length-e;b++){var g=d.rows[b+e];td=document.createElement("td");if(!a._isFooter||b<d.rows.length-e-1){var c=document.createElement("input");c.type=j;c.checked=c.defaultChecked=false;c.id="chk"+a._dataGridId+String(b+a._pageIndex*a._pageSize);td.appendChild(c);a._clickCheckBoxHandler=Function.createDelegate(a,a._clickCheckBox);$addHandler(c,f,a._clickCheckBoxHandler);a._allChkBoxIDs+=String(b+a._pageIndex*a._pageSize)+","}g.insertBefore(td,g.childNodes[0])}}if(a._selectAllId!=undefined&&a._selectAllId!=""){var m=Sys.UI.DomElement.getElementById(a._selectAllId);a._selectAllChkBoxHandler=Function.createDelegate(a,a._selectAllChkBox);$addHandler(m,f,a._selectAllChkBoxHandler)}if(a._unSelectAllId!=undefined&&a._unSelectAllId!=""){var l=Sys.UI.DomElement.getElementById(a._unSelectAllId);a._unSelectAllChkBoxHandler=Function.createDelegate(a,a._unSelectAllChkBox);$addHandler(l,f,a._unSelectAllChkBoxHandler)}if(a._invertSelectId!=undefined&&a._invertSelectId!=""){var k=Sys.UI.DomElement.getElementById(a._invertSelectId);a._invertSelectChkBoxHandler=Function.createDelegate(a,a._invertSelectChkBox);$addHandler(k,f,a._invertSelectChkBoxHandler)}a._resetCheckBoxStatuses(d);a._resetButtonsStatuses()},_selectAllChkBox:function(){var a=this,e=a.get_element();if(!e)return;var b=a._allChkBoxIDs.split(","),d=Sys.UI.DomElement.getElementById(a._checkInfoId);d.value=a._allChkBoxIDs;for(i=0;i<b.length;i++)if(b[i].length>0){var c=document.getElementById("chk"+a._dataGridId+b[i]);if(c!=null)c.checked=true}a._resetButtonsStatuses();return false},_unSelectAllChkBox:function(){var a=this,e=a.get_element();if(!e)return;var b=a._allChkBoxIDs.split(","),d=Sys.UI.DomElement.getElementById(a._checkInfoId);d.value="";for(i=0;i<b.length;i++)if(b[i].length>0){var c=document.getElementById("chk"+a._dataGridId+b[i]);if(c!=null)c.checked=false}a._resetButtonsStatuses();return false},_invertSelectChkBox:function(){var a=this,f=a.get_element();if(!f)return;for(var c=a._allChkBoxIDs.split(","),e=Sys.UI.DomElement.getElementById(a._checkInfoId),b=0;b<c.length;b++)if(c[b].length>0){var d=document.getElementById("chk"+a._dataGridId+c[b]);if(d!=null)if(d.checked){d.checked=false;e.value=a._removeValueFromString(e.value,c[b])}else{d.checked=true;e.value+=b+","}}a._resetButtonsStatuses();return false},_clickCheckBox:function(e){var b=this,c=e.target,d=c.id.substring(3+b._dataGridId.length,c.id.length),a=Sys.UI.DomElement.getElementById(b._checkInfoId);if(c.checked)a.value=a.value+d+",";else a.value=b._removeValueFromString(a.value,d);b._resetButtonsStatuses()},_removeValueFromString:function(e,d){for(var b=e.split(","),c="",a=0;a<b.length;a++)if(b[a]!=d&&b[a]!="")c+=b[a]+",";return c},_resetButtonsStatuses:function(){var c=this,d=Sys.UI.DomElement.getElementById(c._checkInfoId);if(c._userBtnIds!=null&&c._userBtnIds!="")for(var b=c._userBtnIds.split(","),e=b.length,a=0;a<e;a++)if(d==undefined||d.value==""){Sys.UI.DomElement.getElementById(b[a]).style.display="none";Sys.UI.DomElement.getElementById(b[a]+"_span").style.display="inline"}else{Sys.UI.DomElement.getElementById(b[a]+"_span").style.display="none";Sys.UI.DomElement.getElementById(b[a]).style.display="inline"}},_resetCheckBoxStatuses:function(f){var c=Sys.UI.DomElement.getElementById(this._checkInfoId);if(c.value==""||c.value==undefined)return;for(var e=c.value.split(","),b=f.getElementsByTagName("input"),d=0;d<e.length;d++){var a="chk"+this._dataGridId+e[d];if(b[a]!=undefined&&b[a].type=="checkbox")b[a].checked=true}},dispose:function(){var a=this;ACS.Presentation.Web.DataGridEx.DataGridBehavior.callBaseMethod(a,"dispose");if(a._repositionHandler!=undefined&&a._repositionHandler!=null){$removeHandler(window,"resize",a._repositionHandler);a._repositionHandler=null}},_showPopup:function(d){var a=this;if(a._popupHeader==undefined||a._popupHeader==""||a._popupRows==undefined||a._popupRows=="")return;ev=d.rawEvent;for(var l=a._getMouseCoords(ev),k=10,j=10,c=a._popupHeader.split(","),h="",b=0;b<c.length-1;b++)h+="<td class='PopupTableCell' >"+c[b]+"</td>";for(var i=a._popupRows.split(","),e=[],m=(i.length-1)/(c.length-1),b=0;b<m;b++){e[b]="";for(var g=0;g<c.length-1;g++)e[b]=e[b]+"<td class='PopupTableCell'>"+i[g+b*(c.length-1)]+"</td>"}var f=d.target.id.substring(d.target.id.lastIndexOf("_")+1,d.target.id.length);f=f-a._pageIndex*a._pageSize;var n="<Table class='PopupTable' cellpadding='5' cellspacing='0'><tr Class='DataGridHeader'>"+h+"</tr><tr>"+e[f]+"</tr></Table>";a._showRowPopup(k,j,l,n)},_showRowPopup:function(f,e,b,j){var d="px",c=this,a=Sys.UI.DomElement.getElementById(c._popupPanelId);if(window.navigator.appName.toLowerCase().indexOf("explorer")!=-1){var h=navigator.userAgent,g=h.indexOf("MSIE "),i=0;if(g!=-1)i=parseFloat(h.substring(g+5,h.indexOf(";",g)));if(i>=9){a.style.left=b.x+f+d;a.style.top=b.y+e+d}else{a.style.left=b.x+f;a.style.top=b.y+e}}else{a.style.left=b.x+f+d;a.style.top=b.y+e+d}a.style.display="block";a.style.position="fixed";a.innerHTML=j;if(c._popupDelayTime<=0||c._popupDelayTime==undefined)c._popupDelayTime=5e3;setTimeout(hidePopupHandler,c._popupDelayTime)},_hidePopup:function(){window.clearTimeout(hidePopupHandler);var a=Sys.UI.DomElement.getElementById(this._popupPanelId);a.style.display="none"},_getMouseCoords:function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+document.body.scrollLeft-document.body.clientLeft,y:a.clientY+document.body.scrollTop-document.body.clientTop}},_fixSrolPosition:function(){var a=this,f=a.get_element();if(!f)return;var e=Sys.UI.DomElement.getElementById(a._dataGridId),c=e.parentNode,b=c.getElementsByTagName("DIV")[1];if(b==undefined)b=c;if(Sys.UI.DomElement.getElementById(a._scrlPosContainerId)){var d=Sys.UI.DomElement.getElementById(a._scrlPosContainerId);d.value=b.scrollTop}},_reposition:function(){var c="px",a=this,b=a.get_element();if(!b)return;var o=Sys.UI.DomElement.getElementById(a._dataGridId),j=o.parentNode,e=a._footerHeight;if(e==null||e==undefined)e=30;var q=a._rowCount,p=a._pageSize,s=a._pageIndex;if(isNaN(a._verticalOffset))a._verticalOffset=0;if(isNaN(a._verticalSpan))a._verticalSpan=0;var g=1+a._verticalOffset+a._verticalSpan;if(parseInt(b.style.height)>g)j.style.height=parseInt(b.style.height)-g+c;if(isNaN(a._horizontalOffset))a._horizontalOffset=0;if(isNaN(a._horizontalSpan))a._horizontalSpan=0;var d=1+a._horizontalSpan+a._horizontalOffset;if(parseInt(b.style.width)>d)j.style.width=parseInt(b.style.width)-d+c;var l=j.getElementsByTagName("DIV")[0];if(parseInt(b.style.width)>d)l.style.width=parseInt(b.style.width)-d+c;if(q>p||a._footerId!=null&&a._footerId!=undefined){var h=j.getElementsByTagName("DIV")[2];if(parseInt(b.style.width)>1)h.style.width=parseInt(b.style.width)-d+c;if(parseInt(h.style.height)>e)h.style.marginTop="2px"}var i=j.getElementsByTagName("DIV")[1];if(parseInt(b.style.width)>1)i.style.width=parseInt(b.style.width)-d+c;if(parseInt(b.style.height)>60+g){if(h)i.style.height=parseInt(b.style.height)-e-parseInt(h.style.height)-g+c;else i.style.height=parseInt(b.style.height)-e-10-g+c;if(Sys.UI.DomElement.getElementById(a._scrlPosContainerId)){var m=Sys.UI.DomElement.getElementById(a._scrlPosContainerId);i.scrollTop=parseInt(m.value)}}for(var k=l.getElementsByTagName("THEAD")[0].getElementsByTagName("TH"),n=i.getElementsByTagName("TBODY")[0].getElementsByTagName("TR")[0].cells,f=0;f<k.length-1;f++){if(!k[f].style.width)k[f].style.width="40px";n[f].style.width=k[f].style.width}a.raiseRepositioning(Sys.EventArgs.Empty)},get_FooterId:function(){return this._footerId},set_FooterId:function(a){this._footerId=a},get_IsFooter:function(){return this._isFooter},set_IsFooter:function(a){this._isFooter=a},get_DataGridId:function(){return this._dataGridId},set_DataGridId:function(a){this._dataGridId=a},get_FixScroll:function(){return this._fixScroll},set_FixScroll:function(a){this._fixScroll=a},get_ScrlPosContainerId:function(){return this._scrlPosContainerId},set_ScrlPosContainerId:function(a){this._scrlPosContainerId=a},get_HorizontalOffset:function(){return this._horizontalOffset},set_HorizontalOffset:function(a){this._horizontalOffset=a},get_VerticalOffset:function(){return this._verticalOffset},set_VerticalOffset:function(a){this._verticalOffset=a},get_HorizontalSpan:function(){return this._horizontalSpan},set_HorizontalSpan:function(a){this._horizontalSpan=a},get_VerticalSpan:function(){return this._verticalSpan},set_VerticalSpan:function(a){this._verticalSpan=a},get_RowCount:function(){return this._rowCount},set_RowCount:function(a){this._rowCount=a},get_PageSize:function(){return this._pageSize},set_PageSize:function(a){this._pageSize=a},get_PageIndex:function(){return this._pageIndex},set_PageIndex:function(a){this._pageIndex=a},get_AddCheckBoxes:function(){return this._addCheckBoxes},set_AddCheckBoxes:function(a){this._addCheckBoxes=a},get_SelectAllId:function(){return this._selectAllId},set_SelectAllId:function(a){this._selectAllId=a},get_UnSelectAllId:function(){return this._unSelectAllId},set_UnSelectAllId:function(a){this._unSelectAllId=a},get_InvertSelectId:function(){return this._invertSelectId},set_InvertSelectId:function(a){this._invertSelectId=a},get_UserBtnIds:function(){return this._userBtnIds},set_UserBtnIds:function(a){this._userBtnIds=a},get_CheckInfoId:function(){return this._checkInfoId},set_CheckInfoId:function(a){this._checkInfoId=a},get_AllChkBoxIDs:function(){return this._allChkBoxIDs},set_AllChkBoxIDs:function(a){this._allChkBoxIDs=a},get_PopupPanelId:function(){return this._popupPanelId},set_PopupPanelId:function(a){this._popupPanelId=a},get_PopupDelayTime:function(){return this._popupDelayTime},set_PopupDelayTime:function(a){this._popupDelayTime=a},get_PopupHeader:function(){return this._popupHeader},set_PopupHeader:function(a){this._popupHeader=a},get_PopupRows:function(){return this._popupRows},set_PopupRows:function(a){this._popupRows=a},get_FooterHeight:function(){return this._footerHeight},set_FooterHeight:function(a){this._footerHeight=a},add_repositioning:function(a){this.get_events().addHandler("repositioning",a)},remove_repositioning:function(a){this.get_events().removeHandler("repositioning",a)},raiseRepositioning:function(b){var a=this.get_events().getHandler("repositioning");a&&a(this,b)},add_repositioned:function(a){this.get_events().addHandler("repositioned",a)},remove_repositioned:function(a){this.get_events().removeHandler("repositioned",a)},raiseRepositioned:function(b){var a=this.get_events().getHandler("repositioned");a&&a(this,b)}};ACS.Presentation.Web.DataGridEx.DataGridBehavior.registerClass("ACS.Presentation.Web.DataGridEx.DataGridBehavior",Sys.Extended.UI.BehaviorBase);